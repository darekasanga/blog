<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>EMPEROR.NEWS | 記事編集</title>
  <link rel="stylesheet" href="../assets/styles.css" />
</head>
<body data-admin-mode="edit">
  <header class="site-header">
    <div class="inner">
      <div class="brand">
        <div class="brand-mark" aria-hidden="true"></div>
        <div>
          <p class="brand-kicker">BLOG</p>
          <p class="brand-title" data-site-title>EMPEROR.NEWS</p>
        </div>
      </div>
      <nav class="nav-links" aria-label="メインナビゲーション">
        <a href="../index.html" class="nav-link">トップ</a>
        <a href="login.html" class="nav-link" data-auth="guest">ログイン</a>
        <a href="index.html" class="nav-link" data-auth="auth" hidden>記事投稿</a>
        <a href="edit.html" class="nav-link active" data-auth="auth" hidden>記事編集</a>
        <a href="../analyze/index.html" class="nav-link" data-auth="auth" hidden>AI COVE解析</a>
        <button class="nav-link nav-button" type="button" data-auth="auth" data-action="logout" hidden>ログアウト</button>
      </nav>
    </div>
  </header>

  <main>
    <section class="section">
      <div class="inner">
        <p class="kicker">トップページ設定</p>
        <h2>表示エリアの切り替え</h2>
        <div class="info-grid">
          <div class="info-card">
            <label>表示切替</label>
            <div class="manage-flags" style="margin-top: 8px;">
              <label class="flag-toggle">
                <input type="checkbox" id="toggle-hero" />
                <span>最新を届けるブログを表示</span>
              </label>
              <label class="flag-toggle">
                <input type="checkbox" id="toggle-featured" />
                <span>注目の記事を表示</span>
              </label>
            </div>
          </div>
          <div class="info-card">
            <label>注目の記事を選択</label>
            <p class="muted-text" style="margin: 6px 0 0;">投稿一覧の「注目に設定」チェックで最大30件まで指定できます。</p>
            <p class="muted-text" id="featured-count" style="margin: 6px 0 0;"></p>
          </div>
          <div class="info-card">
            <p class="kicker">反映タイミング</p>
            <h3>トップページに即時反映</h3>
            <p class="muted-text">チェックの切替は保存と同時にトップページに反映されます。</p>
          </div>
          <div class="info-card">
            <label for="site-title">ブログ名</label>
            <input id="site-title" type="text" placeholder="例）EMPEROR.NEWS" />
            <label for="footer-description" style="margin-top: 12px;">フッターの説明</label>
            <textarea id="footer-description" rows="3" placeholder="フッターに表示する説明文を入力"></textarea>
            <p class="muted-text" style="margin: 6px 0 0;">サイト全体のヘッダー/フッターに反映されます。</p>
          </div>
        </div>
      </div>
    </section>

    <section class="section muted">
      <div class="inner">
        <div class="section-header">
          <div>
            <p class="kicker">投稿一覧</p>
            <h2>保存済みの記事</h2>
            <p class="muted-text" style="margin-top:4px;">順番や公開状態の編集が可能です。</p>
          </div>
          <p class="muted-text" id="post-count"></p>
        </div>
        <div id="post-list" class="management-list" aria-live="polite"></div>
      </div>
    </section>

    <section class="section">
      <div class="inner">
        <p class="kicker">記事編集</p>
        <h1>選択した記事を編集</h1>
        <p class="lead">投稿一覧から記事を選択すると、編集フォームに内容が読み込まれます。</p>
        <p class="muted-text" id="edit-hint">まずは投稿一覧から編集したい記事を選んでください。</p>
        <div class="theme-pill" id="current-theme-pill">
          <span>表示カラー</span>
          <span class="swatch"></span>
          <strong id="current-theme-label">バイオレット</strong>
        </div>

        <div class="info-grid preview-grid" style="align-items: stretch;">
          <form class="info-card" id="post-form">
            <div class="field">
              <label for="title">タイトル</label>
              <input id="title" name="title" type="text" placeholder="例）統一感のあるUIの作り方" required />
            </div>
            <div class="field-grid">
              <div class="field">
                <label for="date">日付</label>
                <input id="date" name="date" type="date" required />
              </div>
              <div class="field">
                <label for="read">読了時間</label>
                <input id="read" name="read" type="text" placeholder="5 min" required readonly />
                <p class="muted-text" style="margin: 4px 0 0;">本文の長さから自動計算されます。</p>
              </div>
            </div>
            <div class="field-grid">
              <div class="field">
                <label for="tags">タグ（最大2つ・カンマ区切り）</label>
                <input id="tags" name="tags" type="text" placeholder="例）デザイン, UI" />
                <p class="muted-text" style="margin: 6px 0 0;">トップと記事ページに表示されます。</p>
              </div>
            </div>
            <div class="field">
              <label for="content">本文</label>
              <textarea id="content" name="content" rows="6" placeholder="本文を入力。改行も反映されます。" required></textarea>
              <div class="content-guide-controls">
                <label class="flag-toggle">
                  <input type="checkbox" id="content-guide-toggle" aria-controls="content-guide" />
                  <span>編集記号を表示</span>
                </label>
                <p class="muted-text" style="margin: 6px 0 0;">行頭印・番号・改行・罫線・スペース・引用を可視化します。</p>
              </div>
              <div class="content-guide" id="content-guide" hidden>
                <div class="content-guide__legend">
                  <span><strong>•</strong> 行頭印</span>
                  <span><strong>1.</strong> 番号</span>
                  <span><strong>❝</strong> 引用</span>
                  <span><strong>─</strong> 罫線</span>
                  <span><strong>·</strong> スペース</span>
                  <span><strong>↵</strong> 改行</span>
                </div>
                <div class="content-guide__body" id="content-guide-body" aria-live="polite"></div>
              </div>
            </div>
            <div class="field">
              <label for="image">記事画像</label>
              <input id="image" name="image" type="file" accept="image/*" />
              <p class="muted-text" style="margin: 6px 0 0;">アップロード後、自動でリサイズして保存します。</p>
            </div>
            <div class="field">
              <label>画像のフォーカス範囲（%）</label>
              <div class="focus-controls">
                <label class="field">
                  <span>開始位置</span>
                  <input id="focus-start" type="range" min="0" max="95" value="20" />
                </label>
                <label class="field">
                  <span>終了位置</span>
                  <input id="focus-end" type="range" min="5" max="100" value="80" />
                </label>
              </div>
              <p class="muted-text" style="margin: 6px 0 0;">右側プレビューの赤枠をドラッグして範囲修正できます。</p>
            </div>
            <div class="field">
              <label for="card-image-scale">カード画像の拡大率</label>
              <input id="card-image-scale" type="range" min="0.5" max="2" step="0.05" value="1" />
              <p class="muted-text" style="margin: 6px 0 0;">0.5x 〜 2x で拡大率を調整します。現在: <strong id="card-image-scale-label">1.00x</strong></p>
            </div>
            <div class="field">
              <label>最新記事プレビュー設定</label>
              <p class="muted-text" style="margin: 4px 0 8px;">トップページの最新記事に表示されます。</p>
              <label for="hero-mask-width">マスキング範囲</label>
              <input id="hero-mask-width" type="range" min="0" max="100" value="60" />
              <p class="muted-text" style="margin: 6px 0 0;">現在: <strong id="hero-mask-width-label">60%</strong></p>
              <label for="hero-mask-opacity" style="margin-top: 12px;">透過度</label>
              <input id="hero-mask-opacity" type="range" min="0" max="100" value="70" />
              <p class="muted-text" style="margin: 6px 0 0;">現在: <strong id="hero-mask-opacity-label">70%</strong></p>
              <label for="hero-mask-color" style="margin-top: 12px;">色</label>
              <input id="hero-mask-color" type="color" value="#0b0c10" />
              <p class="muted-text" style="margin: 6px 0 0;">現在: <strong id="hero-mask-color-label">#0b0c10</strong></p>
              <label for="hero-mask-gradient" style="margin-top: 12px;">グラデーション</label>
              <input id="hero-mask-gradient" type="range" min="0" max="100" value="20" />
              <p class="muted-text" style="margin: 6px 0 0;">現在: <strong id="hero-mask-gradient-label">20%</strong></p>
              <label for="hero-image-motion" style="margin-top: 12px;">最新記事のモーション</label>
              <input id="hero-image-motion" type="hidden" value="hero-image-rise" />
              <p class="muted-text" style="margin: 6px 0 8px;">最新記事の画像が表示・更新されるタイミングで動きます。</p>
              <div class="motion-sample-grid" role="group" aria-label="最新記事画像モーションのサンプル">
                <button class="chip motion-sample-button" type="button" data-hero-image-motion="hero-image-rise">Flow 01</button>
                <button class="chip motion-sample-button" type="button" data-hero-image-motion="hero-image-zoom-out">Flow 02</button>
                <button class="chip motion-sample-button" type="button" data-hero-image-motion="hero-image-slide">Flow 03</button>
                <button class="chip motion-sample-button" type="button" data-hero-image-motion="hero-image-tilt">Flow 04</button>
                <button class="chip motion-sample-button" type="button" data-hero-image-motion="hero-image-soft-reveal">Flow 05</button>
                <button class="chip motion-sample-button" type="button" data-hero-image-motion="hero-image-surge">Flow 06</button>
                <button class="chip motion-sample-button" type="button" data-hero-image-motion="hero-image-panorama">Flow 07</button>
                <button class="chip motion-sample-button" type="button" data-hero-image-motion="hero-image-spiral">Flow 08</button>
                <button class="chip motion-sample-button" type="button" data-hero-image-motion="hero-image-glide-up">Flow 09</button>
                <button class="chip motion-sample-button" type="button" data-hero-image-motion="hero-image-depth-pop">Flow 10</button>
              </div>
              <label for="hero-position" style="margin-top: 12px;">縦位置</label>
              <input id="hero-position" type="range" min="0" max="100" value="50" />
              <p class="muted-text" style="margin: 6px 0 0;">現在: <strong id="hero-position-label">50%</strong></p>
              <label for="hero-position-x" style="margin-top: 12px;">横位置</label>
              <input id="hero-position-x" type="range" min="0" max="100" value="50" />
              <p class="muted-text" style="margin: 6px 0 0;">現在: <strong id="hero-position-x-label">50%</strong></p>
              <label for="hero-image-scale" style="margin-top: 12px;">最新記事背景の拡大率</label>
              <input id="hero-image-scale" type="range" min="0.5" max="2" step="0.05" value="1" />
              <p class="muted-text" style="margin: 6px 0 0;">現在: <strong id="hero-image-scale-label">1.00x</strong></p>
              <label for="hero-image-fit" style="margin-top: 12px;">最新記事画像の表示</label>
              <select id="hero-image-fit">
                <option value="cover">横いっぱい</option>
                <option value="contain">全体表示</option>
              </select>
              <p class="muted-text" style="margin: 6px 0 0;">画像の表示方法を切り替えます。</p>
              <label for="hero-background-color" style="margin-top: 12px;">背景の下地色</label>
              <input id="hero-background-color" type="color" value="#0b0c10" />
              <p class="muted-text" style="margin: 6px 0 0;">現在: <strong id="hero-background-color-label">#0b0c10</strong></p>
            </div>
            <div class="field">
              <label>記事テーマ</label>
              <p class="muted-text" style="margin: 0;">この記事だけに適用されるカラーを選択できます。</p>
              <div class="theme-grid" id="theme-options"></div>
            </div>
            <p class="form-message" id="result-message" role="status" aria-live="polite" hidden></p>
            <div class="form-actions">
              <button class="btn primary" type="submit" id="submit-button">変更を保存</button>
              <button class="btn ghost" type="button" id="cancel-edit" aria-live="polite" hidden>編集をやめる</button>
              <a class="btn ghost" href="index.html">記事投稿へ</a>
            </div>
          </form>

          <div class="info-card preview-panel">
            <p class="kicker">プレビュー</p>
            <section class="hero preview-hero" id="preview-hero" aria-label="最新記事プレビュー">
              <div class="hero-media" aria-hidden="true">
                <img id="preview-hero-image" alt="" />
              </div>
              <div class="inner">
                <p class="kicker" id="preview-hero-kicker">最新記事プレビュー</p>
                <h2 id="preview-hero-title">デザインシステムで統一感を作る</h2>
                <p class="lead" id="preview-hero-lead">本文からAIが要約します。</p>
                <div class="hero-actions">
                  <button class="btn ghost" type="button">記事を読む</button>
                </div>
              </div>
            </section>
            <article class="card" id="preview-card">
              <div class="card-thumb placeholder" id="preview-thumb" aria-hidden="true" style="--focus-start:20%;--focus-end:80%;"></div>
              <div class="meta">
                <span id="preview-date">2024-05-28</span>
                <span>•</span>
                <span id="preview-read">5 min</span>
              </div>
              <h3 id="preview-title">デザインシステムで統一感を作る</h3>
              <p id="preview-excerpt">本文からAIが要約します。</p>
              <div class="actions">
                <button class="btn primary full" type="button">記事を読む</button>
              </div>
            </article>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="inner footer-grid">
      <div>
        <p class="brand-title" data-site-title>EMPEROR.NEWS</p>
        <p class="muted-text" data-footer-description>シンプルで統一感のあるブログ体験を届けます。</p>
      </div>
      <div class="footer-actions">
        <a class="btn ghost" href="index.html">記事投稿へ</a>
      </div>
      <div id="site-theme-picker" class="footer-theme-picker" aria-label="表示テーマ選択"></div>
    </div>
  </footer>

  <script src="../assets/data.js"></script>
  <script src="../assets/header-auth.js"></script>
  <script src="../assets/admin.js"></script>
</body>
</html>
